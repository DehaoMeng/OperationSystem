# 操作系统实验一

处理器调度

## (1)题目

设计一个按优先数调度算法实现处理器调度的进程。

## (2)提示

（1） 假定系统有五个进程，每一个进程用一个进程控制块 PCB 来代表。进程控制块的格式为：

|     进程名     |
| :------------: |
|      时间      |
| 要求求运行时间 |
|     优先数     |
|      状态      |

其中，进程名----作为进程的标识，假设五个进程的进程名分别是 P1，P2，P3，P4，P5。 指针----按优先数的大小把五个进程连成队列，用指针指出下一个进程的进程控制块 首地址，最后一个进程中的指针为“0”。 要求运行时间----假设进程需要运行的单位时间数。 优先数----赋予进程的优先数，调度时总是选取优先数大的进程先执行。 状态----可假设有两种状态，“就绪”状态和“结束“状态，五个进程的初始状态都为 “就绪“状态，用“R”表示，当一个进程运行结束后，它的状态变为“结束”， 用“E”表示。 

（2） 在每次运行你所设计的处理器调度程序之前，为每个进程任意确定它的“优先数” 和“要求运行时间”。 （3） 为了调度方便，把五个进程按给定的优先数从大到小连成队列，用一单元指出队首 进程，用指针指出队列的连接情况。

（4） 处理器调度总是选队首进程运行。采用动态改变优先数的办法，进程每运行一次优 先数就减“1”。由于本实验是模拟处理器调度，所以，对被选中的进程并不实际的 启动运行，而是执行： 

|    优先数－1    |
| :-------------: |
| 要求运行时间－1 |

来模拟进程的一次运行。 提醒注意的是：在实际的系统中，当一个进程被选中运行时，必须恢复进程的现场， 它占有处理器运行，直到出现等待事件或运行结束。在这里省去了这些工作。 

（5） 进程运行一次后，若要求运行时间≠0，则再将它加入队列（按优先数大小插入，且 置队首标志）；若要求运行时间=0，则把它的状态修改为“结束”，且退出队列。 

（6） 若“就绪”状态的进程队列不为空，则重复上面（4）和（5）的步骤，直到所有进 程都成为“结束”状态。 

（7） 在所设计的称序中应有显示或打印语句，能显示或打印每次被选中进程的进程名以 及运行一次后进称对列的变化。 

（8） 为五个进程任意确定一组“优先数”和“要求运行时间”，启动所设计的处理器调度 程序，显示或打印逐次被选中进程的进程名以及进程控制块的动态变化过程。

## (3)设计思路

创建 一个操作系统 的链表  链表中的每一个结点都是一个进程。

为每个进程 创建名称，所需运行时间及状态数。

如果不排序计算所需等待时间时间：

 * 初始指针指向第一个进程
 * 计算后续进程中进程数大于当前指针指向的进程的状态数的差值 求出所需等待时间
   * 等待时间是由后续进程的求和 （每次运行时间-n）(0<=n<=差值) 最多到0
 * 将其所需等待时间加在一起赋值给指针指向进程的所需等待时间

如果按照状态数排序计算等待所需时间：

* 将当前结点的前驱所有时间求和 与不排序的求和一样 。
* 减少一部比较状态数的操作。

每次运行 所有进程中优先数最大的且 状态为“就绪态” 输出当前运行的 进程 以及所需时间数和优先数

运行一次后 输出所有进程的状态，并且重新计算所需等待时间 

重复上述操作，直到所有进程变为结束态。

## 源码

[点击查看源码]: 

(如果无法打开请重复几次(github 访问不一定总成功))
